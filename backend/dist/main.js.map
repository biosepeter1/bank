{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core';\r\nimport { ValidationPipe } from '@nestjs/common';\r\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\r\nimport { AppModule } from './app.module';\r\nimport { NestExpressApplication } from '@nestjs/platform-express';\r\nimport helmet from 'helmet';\r\nimport { join } from 'path';\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create<NestExpressApplication>(AppModule);\r\n\r\n  // Serve static files (uploads)\r\n  app.useStaticAssets(join(process.cwd(), 'uploads'), {\r\n    prefix: '/uploads/',\r\n  });\r\n\r\n  // Security\r\n  app.use(\r\n    helmet({\r\n      crossOriginResourcePolicy: { policy: 'cross-origin' }, // Allow serving uploaded files\r\n    }),\r\n  );\r\n\r\n  // CORS - allow all origins for development\r\n  app.enableCors({\r\n    origin: true, // Allow all origins in development\r\n    credentials: true,\r\n    methods: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS'],\r\n    allowedHeaders: ['Content-Type', 'Authorization', 'Accept'],\r\n  });\r\n\r\n  // Global prefix\r\n  app.setGlobalPrefix(process.env.API_PREFIX || 'api');\r\n\r\n  // Validation\r\n  app.useGlobalPipes(\r\n    new ValidationPipe({\r\n      whitelist: true,\r\n      forbidNonWhitelisted: true,\r\n      transform: true,\r\n    }),\r\n  );\r\n\r\n  // Swagger Documentation\r\n  const config = new DocumentBuilder()\r\n    .setTitle('RDN Banking Platform API')\r\n    .setDescription('Corporate Digital Banking Platform API Documentation')\r\n    .setVersion('1.0')\r\n    .addBearerAuth()\r\n    .addTag('auth', 'Authentication endpoints')\r\n    .addTag('users', 'User management endpoints')\r\n    .addTag('admin', 'Admin operations')\r\n    .addTag('wallet', 'Wallet operations')\r\n    .addTag('transactions', 'Transaction management')\r\n    .addTag('cards', 'Card management')\r\n    .addTag('kyc', 'KYC verification')\r\n    .build();\r\n\r\n  const document = SwaggerModule.createDocument(app, config);\r\n  SwaggerModule.setup('api', app, document);\r\n\r\n  const port = process.env.PORT || 3001;\r\n  await app.listen(port);\r\n\r\n  console.log(`\\nüè¶ RDN Banking Platform API`);\r\n  console.log(`üöÄ Server running on: http://localhost:${port}`);\r\n  console.log(`üìö API Documentation: http://localhost:${port}/api\\n`);\r\n}\r\n\r\nbootstrap();\r\n"],"names":["bootstrap","app","NestFactory","create","AppModule","useStaticAssets","join","process","cwd","prefix","use","helmet","crossOriginResourcePolicy","policy","enableCors","origin","credentials","methods","allowedHeaders","setGlobalPrefix","env","API_PREFIX","useGlobalPipes","ValidationPipe","whitelist","forbidNonWhitelisted","transform","config","DocumentBuilder","setTitle","setDescription","setVersion","addBearerAuth","addTag","build","document","SwaggerModule","createDocument","setup","port","PORT","listen","console","log"],"mappings":";;;;sBAA4B;wBACG;yBACgB;2BACrB;+DAEP;sBACE;;;;;;AAErB,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAAyBC,oBAAS;IAEtE,+BAA+B;IAC/BH,IAAII,eAAe,CAACC,IAAAA,UAAI,EAACC,QAAQC,GAAG,IAAI,YAAY;QAClDC,QAAQ;IACV;IAEA,WAAW;IACXR,IAAIS,GAAG,CACLC,IAAAA,eAAM,EAAC;QACLC,2BAA2B;YAAEC,QAAQ;QAAe;IACtD;IAGF,2CAA2C;IAC3CZ,IAAIa,UAAU,CAAC;QACbC,QAAQ;QACRC,aAAa;QACbC,SAAS;YAAC;YAAO;YAAQ;YAAO;YAAS;YAAU;SAAU;QAC7DC,gBAAgB;YAAC;YAAgB;YAAiB;SAAS;IAC7D;IAEA,gBAAgB;IAChBjB,IAAIkB,eAAe,CAACZ,QAAQa,GAAG,CAACC,UAAU,IAAI;IAE9C,aAAa;IACbpB,IAAIqB,cAAc,CAChB,IAAIC,sBAAc,CAAC;QACjBC,WAAW;QACXC,sBAAsB;QACtBC,WAAW;IACb;IAGF,wBAAwB;IACxB,MAAMC,SAAS,IAAIC,wBAAe,GAC/BC,QAAQ,CAAC,4BACTC,cAAc,CAAC,wDACfC,UAAU,CAAC,OACXC,aAAa,GACbC,MAAM,CAAC,QAAQ,4BACfA,MAAM,CAAC,SAAS,6BAChBA,MAAM,CAAC,SAAS,oBAChBA,MAAM,CAAC,UAAU,qBACjBA,MAAM,CAAC,gBAAgB,0BACvBA,MAAM,CAAC,SAAS,mBAChBA,MAAM,CAAC,OAAO,oBACdC,KAAK;IAER,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAACpC,KAAK0B;IACnDS,sBAAa,CAACE,KAAK,CAAC,OAAOrC,KAAKkC;IAEhC,MAAMI,OAAOhC,QAAQa,GAAG,CAACoB,IAAI,IAAI;IACjC,MAAMvC,IAAIwC,MAAM,CAACF;IAEjBG,QAAQC,GAAG,CAAC,CAAC,6BAA6B,CAAC;IAC3CD,QAAQC,GAAG,CAAC,CAAC,uCAAuC,EAAEJ,MAAM;IAC5DG,QAAQC,GAAG,CAAC,CAAC,uCAAuC,EAAEJ,KAAK,MAAM,CAAC;AACpE;AAEAvC"}