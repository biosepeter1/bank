{"version":3,"sources":["../../../src/common/services/exchange-rate.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\r\n\r\ninterface ExchangeRates {\r\n  [key: string]: number;\r\n}\r\n\r\n@Injectable()\r\nexport class ExchangeRateService {\r\n  // Mock exchange rates (in production, fetch from API like exchangerate-api.com)\r\n  private rates: ExchangeRates = {\r\n    // Base: USD\r\n    'USD_NGN': 1550, // 1 USD = 1550 NGN\r\n    'USD_GBP': 0.79, // 1 USD = 0.79 GBP\r\n    'USD_EUR': 0.92, // 1 USD = 0.92 EUR\r\n    \r\n    // NGN conversions\r\n    'NGN_USD': 0.00065, // 1 NGN = 0.00065 USD\r\n    'NGN_GBP': 0.00051, // 1 NGN = 0.00051 GBP\r\n    'NGN_EUR': 0.00059, // 1 NGN = 0.00059 EUR\r\n    \r\n    // GBP conversions\r\n    'GBP_USD': 1.27, // 1 GBP = 1.27 USD\r\n    'GBP_NGN': 1962, // 1 GBP = 1962 NGN\r\n    'GBP_EUR': 1.16, // 1 GBP = 1.16 EUR\r\n    \r\n    // EUR conversions\r\n    'EUR_USD': 1.09, // 1 EUR = 1.09 USD\r\n    'EUR_NGN': 1690, // 1 EUR = 1690 NGN\r\n    'EUR_GBP': 0.86, // 1 EUR = 0.86 GBP\r\n  };\r\n\r\n  /**\r\n   * Convert amount from one currency to another\r\n   * @param amount Amount to convert\r\n   * @param from Source currency code\r\n   * @param to Target currency code\r\n   * @returns Converted amount\r\n   */\r\n  convert(amount: number, from: string, to: string): number {\r\n    // Same currency, no conversion needed\r\n    if (from === to) {\r\n      return amount;\r\n    }\r\n\r\n    const rateKey = `${from}_${to}`;\r\n    const rate = this.rates[rateKey];\r\n\r\n    if (!rate) {\r\n      throw new Error(`Exchange rate not available for ${from} to ${to}`);\r\n    }\r\n\r\n    return Number((amount * rate).toFixed(2));\r\n  }\r\n\r\n  /**\r\n   * Get exchange rate between two currencies\r\n   * @param from Source currency code\r\n   * @param to Target currency code\r\n   * @returns Exchange rate\r\n   */\r\n  getRate(from: string, to: string): number {\r\n    if (from === to) {\r\n      return 1;\r\n    }\r\n\r\n    const rateKey = `${from}_${to}`;\r\n    const rate = this.rates[rateKey];\r\n\r\n    if (!rate) {\r\n      throw new Error(`Exchange rate not available for ${from} to ${to}`);\r\n    }\r\n\r\n    return rate;\r\n  }\r\n\r\n  /**\r\n   * Get all supported currencies\r\n   * @returns Array of currency codes\r\n   */\r\n  getSupportedCurrencies(): string[] {\r\n    return ['USD', 'NGN', 'GBP', 'EUR'];\r\n  }\r\n\r\n  /**\r\n   * Check if currency conversion is available\r\n   * @param from Source currency\r\n   * @param to Target currency\r\n   * @returns Boolean indicating if conversion is available\r\n   */\r\n  isConversionAvailable(from: string, to: string): boolean {\r\n    if (from === to) return true;\r\n    const rateKey = `${from}_${to}`;\r\n    return !!this.rates[rateKey];\r\n  }\r\n}\r\n"],"names":["ExchangeRateService","convert","amount","from","to","rateKey","rate","rates","Error","Number","toFixed","getRate","getSupportedCurrencies","isConversionAvailable"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBAPc;;;;;;;AAOpB,IAAA,AAAMA,sBAAN,MAAMA;IAwBX;;;;;;GAMC,GACDC,QAAQC,MAAc,EAAEC,IAAY,EAAEC,EAAU,EAAU;QACxD,sCAAsC;QACtC,IAAID,SAASC,IAAI;YACf,OAAOF;QACT;QAEA,MAAMG,UAAU,GAAGF,KAAK,CAAC,EAAEC,IAAI;QAC/B,MAAME,OAAO,IAAI,CAACC,KAAK,CAACF,QAAQ;QAEhC,IAAI,CAACC,MAAM;YACT,MAAM,IAAIE,MAAM,CAAC,gCAAgC,EAAEL,KAAK,IAAI,EAAEC,IAAI;QACpE;QAEA,OAAOK,OAAO,AAACP,CAAAA,SAASI,IAAG,EAAGI,OAAO,CAAC;IACxC;IAEA;;;;;GAKC,GACDC,QAAQR,IAAY,EAAEC,EAAU,EAAU;QACxC,IAAID,SAASC,IAAI;YACf,OAAO;QACT;QAEA,MAAMC,UAAU,GAAGF,KAAK,CAAC,EAAEC,IAAI;QAC/B,MAAME,OAAO,IAAI,CAACC,KAAK,CAACF,QAAQ;QAEhC,IAAI,CAACC,MAAM;YACT,MAAM,IAAIE,MAAM,CAAC,gCAAgC,EAAEL,KAAK,IAAI,EAAEC,IAAI;QACpE;QAEA,OAAOE;IACT;IAEA;;;GAGC,GACDM,yBAAmC;QACjC,OAAO;YAAC;YAAO;YAAO;YAAO;SAAM;IACrC;IAEA;;;;;GAKC,GACDC,sBAAsBV,IAAY,EAAEC,EAAU,EAAW;QACvD,IAAID,SAASC,IAAI,OAAO;QACxB,MAAMC,UAAU,GAAGF,KAAK,CAAC,EAAEC,IAAI;QAC/B,OAAO,CAAC,CAAC,IAAI,CAACG,KAAK,CAACF,QAAQ;IAC9B;;QArFA,gFAAgF;aACxEE,QAAuB;YAC7B,YAAY;YACZ,WAAW;YACX,WAAW;YACX,WAAW;YAEX,kBAAkB;YAClB,WAAW;YACX,WAAW;YACX,WAAW;YAEX,kBAAkB;YAClB,WAAW;YACX,WAAW;YACX,WAAW;YAEX,kBAAkB;YAClB,WAAW;YACX,WAAW;YACX,WAAW;QACb;;AAiEF"}