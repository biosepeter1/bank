{"version":3,"sources":["../../../src/modules/currency/currency.controller.ts"],"sourcesContent":["import { Controller, Get, Post, Body, Param, UseGuards, Query, HttpCode, HttpStatus } from '@nestjs/common';\nimport { CurrencyService } from './currency.service';\nimport { ApiTags, ApiOperation, ApiBearerAuth } from '@nestjs/swagger';\nimport { JwtAuthGuard } from '@/common/guards/jwt-auth.guard';\n\ninterface ConvertCurrencyDto {\n  amount: number;\n  fromCurrency: string;\n  toCurrency: string;\n}\n\n@ApiTags('Currency')\n@Controller('currency')\nexport class CurrencyController {\n  constructor(private currencyService: CurrencyService) {}\n\n  /**\n   * Get exchange rate between two currencies\n   */\n  @Get('exchange-rate/:from/:to')\n  @ApiOperation({ summary: 'Get exchange rate between currencies' })\n  async getExchangeRate(\n    @Param('from') from: string,\n    @Param('to') to: string,\n  ) {\n    const rate = await this.currencyService.getExchangeRate(from, to);\n    return { from, to, rate };\n  }\n\n  /**\n   * Convert currency amount\n   */\n  @Post('convert')\n  @ApiOperation({ summary: 'Convert amount from one currency to another' })\n  async convertCurrency(@Body() data: ConvertCurrencyDto) {\n    return this.currencyService.convertCurrency(\n      data.amount,\n      data.fromCurrency,\n      data.toCurrency\n    );\n  }\n\n  /**\n   * Get supported currencies\n   */\n  @Get('supported')\n  @ApiOperation({ summary: 'Get list of supported currencies' })\n  async getSupportedCurrencies() {\n    const currencies = await this.currencyService.getSupportedCurrencies();\n    return { currencies };\n  }\n\n  /**\n   * Get exchange rate history\n   */\n  @Get('history/:from/:to')\n  @ApiOperation({ summary: 'Get exchange rate history' })\n  async getExchangeRateHistory(\n    @Param('from') from: string,\n    @Param('to') to: string,\n    @Query('days') days: number = 30,\n  ) {\n    const history = await this.currencyService.getExchangeRateHistory(from, to, days);\n    return { from, to, days, history };\n  }\n\n  /**\n   * Update exchange rate (admin only)\n   */\n  @Post('update-rate')\n  @ApiBearerAuth()\n  @UseGuards(JwtAuthGuard)\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({ summary: 'Update exchange rate (admin)' })\n  async updateExchangeRate(\n    @Body() data: { fromCurrency: string; toCurrency: string; rate: number }\n  ) {\n    return this.currencyService.updateExchangeRate(\n      data.fromCurrency,\n      data.toCurrency,\n      data.rate\n    );\n  }\n}\n"],"names":["CurrencyController","getExchangeRate","from","to","rate","currencyService","convertCurrency","data","amount","fromCurrency","toCurrency","getSupportedCurrencies","currencies","getExchangeRateHistory","days","history","updateExchangeRate","summary","OK"],"mappings":";;;;+BAaaA;;;eAAAA;;;wBAb8E;iCAC3D;yBACqB;8BACxB;;;;;;;;;;;;;;;AAUtB,IAAA,AAAMA,qBAAN,MAAMA;IAGX;;GAEC,GACD,MAEMC,gBACJ,AAAeC,IAAY,EAC3B,AAAaC,EAAU,EACvB;QACA,MAAMC,OAAO,MAAM,IAAI,CAACC,eAAe,CAACJ,eAAe,CAACC,MAAMC;QAC9D,OAAO;YAAED;YAAMC;YAAIC;QAAK;IAC1B;IAEA;;GAEC,GACD,MAEME,gBAAgB,AAAQC,IAAwB,EAAE;QACtD,OAAO,IAAI,CAACF,eAAe,CAACC,eAAe,CACzCC,KAAKC,MAAM,EACXD,KAAKE,YAAY,EACjBF,KAAKG,UAAU;IAEnB;IAEA;;GAEC,GACD,MAEMC,yBAAyB;QAC7B,MAAMC,aAAa,MAAM,IAAI,CAACP,eAAe,CAACM,sBAAsB;QACpE,OAAO;YAAEC;QAAW;IACtB;IAEA;;GAEC,GACD,MAEMC,uBACJ,AAAeX,IAAY,EAC3B,AAAaC,EAAU,EACvB,AAAeW,OAAe,EAAE,EAChC;QACA,MAAMC,UAAU,MAAM,IAAI,CAACV,eAAe,CAACQ,sBAAsB,CAACX,MAAMC,IAAIW;QAC5E,OAAO;YAAEZ;YAAMC;YAAIW;YAAMC;QAAQ;IACnC;IAEA;;GAEC,GACD,MAKMC,mBACJ,AAAQT,IAAgE,EACxE;QACA,OAAO,IAAI,CAACF,eAAe,CAACW,kBAAkB,CAC5CT,KAAKE,YAAY,EACjBF,KAAKG,UAAU,EACfH,KAAKH,IAAI;IAEb;IApEA,YAAY,AAAQC,eAAgC,CAAE;aAAlCA,kBAAAA;IAAmC;AAqEzD;;;;QA/DkBY,SAAS;;;;;;;;;;;;;;QAaTA,SAAS;;;;;;;;;;;;QAaTA,SAAS;;;;;;;;;QAUTA,SAAS;;;;;;;;;;;;;;;;;6CAgBJC;;QACLD,SAAS"}