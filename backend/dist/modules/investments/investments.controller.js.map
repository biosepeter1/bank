{"version":3,"sources":["../../../src/modules/investments/investments.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Post,\n  Get,\n  Body,\n  Param,\n  UseGuards,\n  Request,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport { InvestmentsService } from './investments.service';\nimport { JwtAuthGuard } from '@/common/guards/jwt-auth.guard';\nimport { CreateInvestmentDto, LiquidateInvestmentDto } from './dto/create-investment.dto';\nimport { ApiTags, ApiOperation, ApiBearerAuth } from '@nestjs/swagger';\n\n@ApiTags('Investments')\n@ApiBearerAuth()\n@UseGuards(JwtAuthGuard)\n@Controller('investments')\nexport class InvestmentsController {\n  constructor(private investmentsService: InvestmentsService) {}\n\n  /**\n   * Get available investment plans\n   */\n  @Get('plans')\n  @ApiOperation({ summary: 'Get available investment plans' })\n  getInvestmentPlans() {\n    return this.investmentsService.getInvestmentPlans();\n  }\n\n  /**\n   * Create a new investment\n   */\n  @Post('create')\n  @HttpCode(HttpStatus.CREATED)\n  @ApiOperation({ summary: 'Create a new investment' })\n  async createInvestment(\n    @Request() req,\n    @Body() createInvestmentDto: CreateInvestmentDto\n  ) {\n    const userId = req.user.id;\n    return this.investmentsService.createInvestment(userId, createInvestmentDto);\n  }\n\n  /**\n   * Get user investments\n   */\n  @Get('list')\n  @ApiOperation({ summary: 'Get user investments' })\n  async getUserInvestments(@Request() req) {\n    const userId = req.user.id;\n    return this.investmentsService.getUserInvestments(userId);\n  }\n\n  /**\n   * Get investment summary\n   */\n  @Get('summary')\n  @ApiOperation({ summary: 'Get investment summary with accrued interest' })\n  async getInvestmentSummary(@Request() req) {\n    const userId = req.user.id;\n    return this.investmentsService.getInvestmentSummary(userId);\n  }\n\n  /**\n   * Get specific investment details\n   */\n  @Get(':investmentId')\n  @ApiOperation({ summary: 'Get investment details' })\n  async getInvestmentById(\n    @Request() req,\n    @Param('investmentId') investmentId: string\n  ) {\n    const userId = req.user.id;\n    return this.investmentsService.getInvestmentById(userId, investmentId);\n  }\n\n  /**\n   * Liquidate investment early\n   */\n  @Post(':investmentId/liquidate')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({ summary: 'Liquidate investment early (with penalty)' })\n  async liquidateInvestment(\n    @Request() req,\n    @Param('investmentId') investmentId: string\n  ) {\n    const userId = req.user.id;\n    return this.investmentsService.liquidateInvestment(userId, investmentId);\n  }\n}\n"],"names":["InvestmentsController","getInvestmentPlans","investmentsService","createInvestment","req","createInvestmentDto","userId","user","id","getUserInvestments","getInvestmentSummary","getInvestmentById","investmentId","liquidateInvestment","summary","CREATED","OK"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAVN;oCAC4B;8BACN;qCAC+B;yBACP;;;;;;;;;;;;;;;AAM9C,IAAA,AAAMA,wBAAN,MAAMA;IAGX;;GAEC,GACD,AAEAC,qBAAqB;QACnB,OAAO,IAAI,CAACC,kBAAkB,CAACD,kBAAkB;IACnD;IAEA;;GAEC,GACD,MAGME,iBACJ,AAAWC,GAAG,EACd,AAAQC,mBAAwC,EAChD;QACA,MAAMC,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACN,kBAAkB,CAACC,gBAAgB,CAACG,QAAQD;IAC1D;IAEA;;GAEC,GACD,MAEMI,mBAAmB,AAAWL,GAAG,EAAE;QACvC,MAAME,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACN,kBAAkB,CAACO,kBAAkB,CAACH;IACpD;IAEA;;GAEC,GACD,MAEMI,qBAAqB,AAAWN,GAAG,EAAE;QACzC,MAAME,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACN,kBAAkB,CAACQ,oBAAoB,CAACJ;IACtD;IAEA;;GAEC,GACD,MAEMK,kBACJ,AAAWP,GAAG,EACd,AAAuBQ,YAAoB,EAC3C;QACA,MAAMN,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACN,kBAAkB,CAACS,iBAAiB,CAACL,QAAQM;IAC3D;IAEA;;GAEC,GACD,MAGMC,oBACJ,AAAWT,GAAG,EACd,AAAuBQ,YAAoB,EAC3C;QACA,MAAMN,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACN,kBAAkB,CAACW,mBAAmB,CAACP,QAAQM;IAC7D;IAtEA,YAAY,AAAQV,kBAAsC,CAAE;aAAxCA,qBAAAA;IAAyC;AAuE/D;;;;QAjEkBY,SAAS;;;;;;;;6CASJC;;QACLD,SAAS;;;;;;;;;;;;;;QAaTA,SAAS;;;;;;;;;;;;QAUTA,SAAS;;;;;;;;;;;;QAUTA,SAAS;;;;;;;;;;;;;6CAaJE;;QACLF,SAAS"}