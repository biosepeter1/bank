{"version":3,"sources":["../../../src/modules/users/users.controller.ts"],"sourcesContent":["import { Controller, Get, Param, Patch, Body, UseGuards, Delete, Post } from '@nestjs/common';\r\nimport { ApiTags, ApiOperation, ApiBearerAuth } from '@nestjs/swagger';\r\nimport { UsersService } from './users.service';\r\nimport { JwtAuthGuard } from '../../common/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../../common/guards/roles.guard';\r\nimport { Roles } from '../../common/decorators/roles.decorator';\r\nimport { CurrentUser } from '../../common/decorators/current-user.decorator';\r\nimport { AccountStatus } from '@prisma/client';\r\n\r\n@ApiTags('users')\r\n@Controller('users')\r\n@UseGuards(JwtAuthGuard, RolesGuard)\r\n@ApiBearerAuth()\r\nexport class UsersController {\r\n  constructor(private readonly usersService: UsersService) {}\r\n\r\n  @Get()\r\n  @Roles('SUPER_ADMIN', 'BANK_ADMIN')\r\n  @ApiOperation({ summary: 'Get all users (Admin only)' })\r\n  findAll(@CurrentUser() admin: any) {\r\n    return this.usersService.findAll(admin.role);\r\n  }\r\n\r\n  @Get(':id')\r\n  @ApiOperation({ summary: 'Get user by ID' })\r\n  findOne(@Param('id') id: string) {\r\n    return this.usersService.findOne(id);\r\n  }\r\n\r\n  @Patch(':id/status')\r\n  @Roles('SUPER_ADMIN', 'BANK_ADMIN')\r\n  @ApiOperation({ summary: 'Update user account status (Admin only)' })\r\n  updateUserStatus(\r\n    @Param('id') id: string,\r\n    @Body('status') status: AccountStatus,\r\n  ) {\r\n    return this.usersService.updateUserStatus(id, status);\r\n  }\r\n\r\n  @Post(':id/balance')\r\n  @Roles('SUPER_ADMIN', 'BANK_ADMIN')\r\n  @ApiOperation({ summary: 'Adjust user balance (Admin only)' })\r\n  adjustBalance(\r\n    @Param('id') id: string,\r\n    @Body() data: { type: 'credit' | 'debit'; amount: number; reason?: string },\r\n    @CurrentUser() admin: any,\r\n  ) {\r\n    return this.usersService.adjustBalance(id, data.type, data.amount, data.reason, admin.id);\r\n  }\r\n\r\n  @Delete(':id')\r\n  @Roles('SUPER_ADMIN')\r\n  @ApiOperation({ summary: 'Delete user (Super Admin only)' })\r\n  deleteUser(@Param('id') id: string) {\r\n    return this.usersService.deleteUser(id);\r\n  }\r\n}\r\n"],"names":["UsersController","findAll","admin","usersService","role","findOne","id","updateUserStatus","status","adjustBalance","data","type","amount","reason","deleteUser","summary"],"mappings":";;;;+BAaaA;;;eAAAA;;;wBAbgE;yBACxB;8BACxB;8BACA;4BACF;gCACL;sCACM;wBACE;;;;;;;;;;;;;;;AAMvB,IAAA,AAAMA,kBAAN,MAAMA;IAMXC,QAAQ,AAAeC,KAAU,EAAE;QACjC,OAAO,IAAI,CAACC,YAAY,CAACF,OAAO,CAACC,MAAME,IAAI;IAC7C;IAIAC,QAAQ,AAAaC,EAAU,EAAE;QAC/B,OAAO,IAAI,CAACH,YAAY,CAACE,OAAO,CAACC;IACnC;IAKAC,iBACE,AAAaD,EAAU,EACvB,AAAgBE,MAAqB,EACrC;QACA,OAAO,IAAI,CAACL,YAAY,CAACI,gBAAgB,CAACD,IAAIE;IAChD;IAKAC,cACE,AAAaH,EAAU,EACvB,AAAQI,IAAmE,EAC3E,AAAeR,KAAU,EACzB;QACA,OAAO,IAAI,CAACC,YAAY,CAACM,aAAa,CAACH,IAAII,KAAKC,IAAI,EAAED,KAAKE,MAAM,EAAEF,KAAKG,MAAM,EAAEX,MAAMI,EAAE;IAC1F;IAKAQ,WAAW,AAAaR,EAAU,EAAE;QAClC,OAAO,IAAI,CAACH,YAAY,CAACW,UAAU,CAACR;IACtC;IAzCA,YAAY,AAAiBH,YAA0B,CAAE;aAA5BA,eAAAA;IAA6B;AA0C5D;;;;;QAtCkBY,SAAS;;;;;;;;;;;;QAMTA,SAAS;;;;;;;;;;;;;QAOTA,SAAS;;;;;;;;;;;;;;;QAUTA,SAAS;;;;;;;;;;;;;;;;;QAWTA,SAAS"}