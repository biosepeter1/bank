{"version":3,"sources":["../../../src/modules/withdrawals/withdrawals.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Post,\n  Get,\n  Body,\n  Param,\n  UseGuards,\n  Request,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport { WithdrawalsService } from './withdrawals.service';\nimport { JwtAuthGuard } from '@/common/guards/jwt-auth.guard';\nimport { CreateWithdrawalDto, ApproveWithdrawalDto, RejectWithdrawalDto } from './dto/create-withdrawal.dto';\nimport { ApiTags, ApiOperation, ApiBearerAuth } from '@nestjs/swagger';\n\n@ApiTags('Withdrawals')\n@ApiBearerAuth()\n@UseGuards(JwtAuthGuard)\n@Controller('withdrawals')\nexport class WithdrawalsController {\n  constructor(private withdrawalsService: WithdrawalsService) {}\n\n  /**\n   * Initiate a withdrawal request\n   */\n  @Post('initiate')\n  @HttpCode(HttpStatus.CREATED)\n  @ApiOperation({ summary: 'Initiate a withdrawal request' })\n  async initiateWithdrawal(@Request() req, @Body() createWithdrawalDto: CreateWithdrawalDto) {\n    const userId = req.user.id;\n    return this.withdrawalsService.initiateWithdrawal(userId, createWithdrawalDto);\n  }\n\n  /**\n   * Get withdrawal history\n   */\n  @Get('history')\n  @ApiOperation({ summary: 'Get user withdrawal history' })\n  async getWithdrawalHistory(@Request() req) {\n    const userId = req.user.id;\n    return this.withdrawalsService.getWithdrawalHistory(userId);\n  }\n\n  /**\n   * Get specific withdrawal details\n   */\n  @Get(':withdrawalId')\n  @ApiOperation({ summary: 'Get withdrawal details' })\n  async getWithdrawalById(@Request() req, @Param('withdrawalId') withdrawalId: string) {\n    const userId = req.user.id;\n    return this.withdrawalsService.getWithdrawalById(userId, withdrawalId);\n  }\n\n  /**\n   * Cancel a withdrawal request\n   */\n  @Post(':withdrawalId/cancel')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({ summary: 'Cancel a pending withdrawal' })\n  async cancelWithdrawal(@Request() req, @Param('withdrawalId') withdrawalId: string) {\n    const userId = req.user.id;\n    return this.withdrawalsService.cancelWithdrawal(userId, withdrawalId);\n  }\n\n  /**\n   * Approve withdrawal (admin only)\n   */\n  @Post('admin/approve')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({ summary: 'Approve withdrawal (admin)' })\n  async approveWithdrawal(@Body() data: ApproveWithdrawalDto) {\n    return this.withdrawalsService.approveWithdrawal(data.withdrawalId);\n  }\n\n  /**\n   * Reject withdrawal (admin only)\n   */\n  @Post('admin/reject')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({ summary: 'Reject withdrawal (admin)' })\n  async rejectWithdrawal(@Body() data: RejectWithdrawalDto) {\n    return this.withdrawalsService.rejectWithdrawal(data.withdrawalId, data.reason);\n  }\n}\n"],"names":["WithdrawalsController","initiateWithdrawal","req","createWithdrawalDto","userId","user","id","withdrawalsService","getWithdrawalHistory","getWithdrawalById","withdrawalId","cancelWithdrawal","approveWithdrawal","data","rejectWithdrawal","reason","CREATED","summary","OK"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAVN;oCAC4B;8BACN;qCACkD;yBAC1B;;;;;;;;;;;;;;;AAM9C,IAAA,AAAMA,wBAAN,MAAMA;IAGX;;GAEC,GACD,MAGMC,mBAAmB,AAAWC,GAAG,EAAE,AAAQC,mBAAwC,EAAE;QACzF,MAAMC,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACC,kBAAkB,CAACN,kBAAkB,CAACG,QAAQD;IAC5D;IAEA;;GAEC,GACD,MAEMK,qBAAqB,AAAWN,GAAG,EAAE;QACzC,MAAME,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACC,kBAAkB,CAACC,oBAAoB,CAACJ;IACtD;IAEA;;GAEC,GACD,MAEMK,kBAAkB,AAAWP,GAAG,EAAE,AAAuBQ,YAAoB,EAAE;QACnF,MAAMN,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACC,kBAAkB,CAACE,iBAAiB,CAACL,QAAQM;IAC3D;IAEA;;GAEC,GACD,MAGMC,iBAAiB,AAAWT,GAAG,EAAE,AAAuBQ,YAAoB,EAAE;QAClF,MAAMN,SAASF,IAAIG,IAAI,CAACC,EAAE;QAC1B,OAAO,IAAI,CAACC,kBAAkB,CAACI,gBAAgB,CAACP,QAAQM;IAC1D;IAEA;;GAEC,GACD,MAGME,kBAAkB,AAAQC,IAA0B,EAAE;QAC1D,OAAO,IAAI,CAACN,kBAAkB,CAACK,iBAAiB,CAACC,KAAKH,YAAY;IACpE;IAEA;;GAEC,GACD,MAGMI,iBAAiB,AAAQD,IAAyB,EAAE;QACxD,OAAO,IAAI,CAACN,kBAAkB,CAACO,gBAAgB,CAACD,KAAKH,YAAY,EAAEG,KAAKE,MAAM;IAChF;IA9DA,YAAY,AAAQR,kBAAsC,CAAE;aAAxCA,qBAAAA;IAAyC;AA+D/D;;;6CAzDuBS;;QACLC,SAAS;;;;;;;;;;;;;;QAUTA,SAAS;;;;;;;;;;;;QAUTA,SAAS;;;;;;;;;;;;;6CAUJC;;QACLD,SAAS;;;;;;;;;;;;;6CAUJC;;QACLD,SAAS;;;;;;;;;;;6CASJC;;QACLD,SAAS"}