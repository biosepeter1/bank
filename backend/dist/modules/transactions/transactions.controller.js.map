{"version":3,"sources":["../../../src/modules/transactions/transactions.controller.ts"],"sourcesContent":["import { Controller, Get, Param, Query, UseGuards } from '@nestjs/common';\r\nimport { ApiTags, ApiOperation, ApiBearerAuth, ApiQuery } from '@nestjs/swagger';\r\nimport { TransactionsService } from './transactions.service';\r\nimport { JwtAuthGuard } from '../../common/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '../../common/guards/roles.guard';\r\nimport { Roles } from '../../common/decorators/roles.decorator';\r\nimport { CurrentUser } from '../../common/decorators/current-user.decorator';\r\n\r\n@ApiTags('transactions')\r\n@Controller('transactions')\r\n@UseGuards(JwtAuthGuard)\r\n@ApiBearerAuth()\r\nexport class TransactionsController {\r\n  constructor(private readonly transactionsService: TransactionsService) { }\r\n\r\n  @Get()\r\n  @ApiOperation({ summary: 'Get user transactions' })\r\n  @ApiQuery({ name: 'limit', required: false, type: Number })\r\n  getUserTransactions(\r\n    @CurrentUser() user: any,\r\n    @Query('limit') limit?: number,\r\n  ) {\r\n    return this.transactionsService.getUserTransactions(user.id, limit);\r\n  }\r\n\r\n  @Get('stats')\r\n  @ApiOperation({ summary: 'Get transaction statistics' })\r\n  getStats(@CurrentUser() user: any) {\r\n    return this.transactionsService.getTransactionStats(user.id);\r\n  }\r\n\r\n  @Get('admin/stats')\r\n  @UseGuards(RolesGuard)\r\n  @Roles('SUPER_ADMIN', 'BANK_ADMIN')\r\n  @ApiOperation({ summary: 'Get global transaction statistics (Admin only)' })\r\n  getAdminStats() {\r\n    return this.transactionsService.getAdminTransactionStats();\r\n  }\r\n\r\n  @Get('all')\r\n  @UseGuards(RolesGuard)\r\n  @Roles('SUPER_ADMIN', 'BANK_ADMIN')\r\n  @ApiOperation({ summary: 'Get all transactions (Admin only)' })\r\n  @ApiQuery({ name: 'limit', required: false, type: Number })\r\n  getAllTransactions(@Query('limit') limit?: number) {\r\n    return this.transactionsService.getAllTransactions(limit);\r\n  }\r\n\r\n  @Get(':id')\r\n  @ApiOperation({ summary: 'Get transaction by ID' })\r\n  getTransaction(@Param('id') id: string, @CurrentUser() user: any) {\r\n    return this.transactionsService.getTransactionById(id, user.id);\r\n  }\r\n}\r\n"],"names":["TransactionsController","getUserTransactions","user","limit","transactionsService","id","getStats","getTransactionStats","getAdminStats","getAdminTransactionStats","getAllTransactions","getTransaction","getTransactionById","summary","name","required","type","Number"],"mappings":";;;;+BAYaA;;;eAAAA;;;wBAZ4C;yBACM;qCAC3B;8BACP;4BACF;gCACL;sCACM;;;;;;;;;;;;;;;AAMrB,IAAA,AAAMA,yBAAN,MAAMA;IAMXC,oBACE,AAAeC,IAAS,EACxB,AAAgBC,KAAc,EAC9B;QACA,OAAO,IAAI,CAACC,mBAAmB,CAACH,mBAAmB,CAACC,KAAKG,EAAE,EAAEF;IAC/D;IAIAG,SAAS,AAAeJ,IAAS,EAAE;QACjC,OAAO,IAAI,CAACE,mBAAmB,CAACG,mBAAmB,CAACL,KAAKG,EAAE;IAC7D;IAMAG,gBAAgB;QACd,OAAO,IAAI,CAACJ,mBAAmB,CAACK,wBAAwB;IAC1D;IAOAC,mBAAmB,AAAgBP,KAAc,EAAE;QACjD,OAAO,IAAI,CAACC,mBAAmB,CAACM,kBAAkB,CAACP;IACrD;IAIAQ,eAAe,AAAaN,EAAU,EAAE,AAAeH,IAAS,EAAE;QAChE,OAAO,IAAI,CAACE,mBAAmB,CAACQ,kBAAkB,CAACP,IAAIH,KAAKG,EAAE;IAChE;IAvCA,YAAY,AAAiBD,mBAAwC,CAAE;aAA1CA,sBAAAA;IAA4C;AAwC3E;;;;QArCkBS,SAAS;;;QACbC,MAAM;QAASC,UAAU;QAAOC,MAAMC;;;;;;;;;;;;;;QASlCJ,SAAS;;;;;;;;;;;;;;QAQTA,SAAS;;;;;;;;;;;QAQTA,SAAS;;;QACbC,MAAM;QAASC,UAAU;QAAOC,MAAMC;;;;;;;;;;;;QAMlCJ,SAAS"}