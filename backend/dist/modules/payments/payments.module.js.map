{"version":3,"sources":["../../../src/modules/payments/payments.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\r\nimport { ConfigModule, ConfigService } from '@nestjs/config';\r\nimport { PaymentsController } from './payments.controller';\r\nimport { PaymentsService } from './payments.service';\r\nimport { PaystackService } from './paystack.service';\r\nimport { PaystackDemoService } from './paystack-demo.service';\r\nimport { WebhookService } from './webhook.service';\r\nimport { DemoController } from './demo.controller';\r\nimport { PrismaModule } from 'src/prisma/prisma.module';\r\n\r\n@Module({\r\n  imports: [\r\n    ConfigModule,\r\n    PrismaModule,\r\n  ],\r\n  controllers: [PaymentsController, DemoController],\r\n  providers: [\r\n    PaymentsService,\r\n    WebhookService,\r\n    PaystackDemoService,\r\n    {\r\n      provide: PaystackService,\r\n      useFactory: (configService: ConfigService, demoService: PaystackDemoService) => {\r\n        const paystackSecretKey = configService.get<string>('PAYSTACK_SECRET_KEY');\r\n        \r\n        // Use demo service if no real API key is provided or if key contains placeholder text\r\n        if (!paystackSecretKey || paystackSecretKey.includes('your-paystack-secret-key')) {\r\n          console.log('ðŸŽ­ DEMO MODE: Using PaystackDemoService (no valid API key found)');\r\n          return demoService;\r\n        }\r\n        \r\n        console.log('ðŸ”‘ PRODUCTION MODE: Using real PaystackService');\r\n        return new PaystackService(configService);\r\n      },\r\n      inject: [ConfigService, PaystackDemoService],\r\n    },\r\n  ],\r\n  exports: [\r\n    PaymentsService,\r\n    PaystackService,\r\n    WebhookService,\r\n    PaystackDemoService,\r\n  ],\r\n})\r\nexport class PaymentsModule {}\r\n"],"names":["PaymentsModule","imports","ConfigModule","PrismaModule","controllers","PaymentsController","DemoController","providers","PaymentsService","WebhookService","PaystackDemoService","provide","PaystackService","useFactory","configService","demoService","paystackSecretKey","get","includes","console","log","inject","ConfigService","exports"],"mappings":";;;;+BA4CaA;;;eAAAA;;;wBA5CU;wBACqB;oCACT;iCACH;iCACA;qCACI;gCACL;gCACA;8BACF;;;;;;;AAoCtB,IAAA,AAAMA,iBAAN,MAAMA;AAAgB;;;QAjC3BC,SAAS;YACPC,oBAAY;YACZC,0BAAY;SACb;QACDC,aAAa;YAACC,sCAAkB;YAAEC,8BAAc;SAAC;QACjDC,WAAW;YACTC,gCAAe;YACfC,8BAAc;YACdC,wCAAmB;YACnB;gBACEC,SAASC,gCAAe;gBACxBC,YAAY,CAACC,eAA8BC;oBACzC,MAAMC,oBAAoBF,cAAcG,GAAG,CAAS;oBAEpD,sFAAsF;oBACtF,IAAI,CAACD,qBAAqBA,kBAAkBE,QAAQ,CAAC,6BAA6B;wBAChFC,QAAQC,GAAG,CAAC;wBACZ,OAAOL;oBACT;oBAEAI,QAAQC,GAAG,CAAC;oBACZ,OAAO,IAAIR,gCAAe,CAACE;gBAC7B;gBACAO,QAAQ;oBAACC,qBAAa;oBAAEZ,wCAAmB;iBAAC;YAC9C;SACD;QACDa,SAAS;YACPf,gCAAe;YACfI,gCAAe;YACfH,8BAAc;YACdC,wCAAmB;SACpB"}