(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9302],{262:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(95155),n=r(12115),a=r(97003),o=r(83209),i=r(89436);function c(){let[e,t]=(0,n.useState)([]),[r,c]=(0,n.useState)(null),l=e=>{t(t=>[...t,"".concat(new Date().toISOString(),": ").concat(e)])};(0,n.useEffect)(()=>{{let e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken");c({hasAccessToken:!!e,hasRefreshToken:!!t,accessTokenLength:(null==e?void 0:e.length)||0,accessTokenPreview:e?"".concat(e.substring(0,30),"..."):"none"}),l("Initial token check - Access: ".concat(!!e,", Refresh: ").concat(!!t))}},[]);let d=async()=>{l("Starting login test...");try{let e=await i.Z.login({email:"test@example.com",password:"Test123!"});l("Login response received: ".concat(JSON.stringify(e))),e.accessToken&&(localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),l("Tokens saved to localStorage"),c({hasAccessToken:!0,hasRefreshToken:!0,accessTokenLength:e.accessToken.length,accessTokenPreview:"".concat(e.accessToken.substring(0,30),"...")}))}catch(t){var e;l("Login error: ".concat(t.message)),l("Error details: ".concat(JSON.stringify(null==(e=t.response)?void 0:e.data)))}},u=async()=>{l("Testing /auth/me endpoint...");let e=localStorage.getItem("accessToken");l("Current token: ".concat(e?"".concat(e.substring(0,30),"..."):"none"));try{let e=await i.Z.getProfile();l("Profile fetched successfully: ".concat(JSON.stringify(e)))}catch(e){var t,r;l("Profile fetch error: ".concat(e.message)),l("Error status: ".concat(null==(t=e.response)?void 0:t.status)),l("Error data: ".concat(JSON.stringify(null==(r=e.response)?void 0:r.data)))}},h=async()=>{l("Testing direct fetch with token...");let e=localStorage.getItem("accessToken");try{let t=await fetch("http://localhost:3001/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(l("Response status: ".concat(t.status)),t.ok){let e=await t.json();l("Response data: ".concat(JSON.stringify(e)))}else{let e=await t.text();l("Error response: ".concat(e))}}catch(e){l("Fetch error: ".concat(e.message))}};return(0,s.jsxs)("div",{className:"container mx-auto p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Authentication Debug Page"}),(0,s.jsxs)("div",{className:"grid gap-6 mb-6",children:[(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Token Information"})}),(0,s.jsx)(o.Wu,{children:r?(0,s.jsxs)("div",{className:"space-y-2 font-mono text-sm",children:[(0,s.jsxs)("p",{children:["Has Access Token: ",r.hasAccessToken?"✅":"❌"]}),(0,s.jsxs)("p",{children:["Has Refresh Token: ",r.hasRefreshToken?"✅":"❌"]}),(0,s.jsxs)("p",{children:["Access Token Length: ",r.accessTokenLength]}),(0,s.jsxs)("p",{className:"break-all",children:["Token Preview: ",r.accessTokenPreview]})]}):(0,s.jsx)("p",{children:"No token information available"})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Test Actions"})}),(0,s.jsx)(o.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(a.$,{onClick:d,children:"Test Login"}),(0,s.jsx)(a.$,{onClick:u,variant:"secondary",children:"Test Get Profile"}),(0,s.jsx)(a.$,{onClick:h,variant:"secondary",children:"Test Direct Fetch"}),(0,s.jsx)(a.$,{onClick:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null),l("Tokens cleared from localStorage")},variant:"destructive",children:"Clear Tokens"}),(0,s.jsx)(a.$,{onClick:()=>{t([])},variant:"outline",children:"Clear Logs"})]})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Console Logs"})}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"bg-black text-green-400 p-4 rounded font-mono text-xs h-96 overflow-y-auto",children:0===e.length?(0,s.jsx)("p",{children:"No logs yet. Click a test button to start."}):e.map((e,t)=>(0,s.jsx)("div",{className:"mb-1",children:e},t))})})]})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Instructions"})}),(0,s.jsxs)(o.Wu,{className:"space-y-2",children:[(0,s.jsx)("p",{children:"1. First, register a user at /register or use existing credentials"}),(0,s.jsx)("p",{children:'2. Click "Test Login" to authenticate and save tokens'}),(0,s.jsx)("p",{children:'3. Click "Test Get Profile" to verify the token works with the API client'}),(0,s.jsx)("p",{children:'4. Click "Test Direct Fetch" to verify raw fetch works with the token'}),(0,s.jsx)("p",{children:"5. Check the console logs to see detailed information about each request"})]})]})]})}},25016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(2821),n=r(75889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}},32467:(e,t,r)=>{"use strict";r.d(t,{DX:()=>i,TL:()=>o});var s=r(12115),n=r(94446),a=r(95155);function o(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...a}=e;if(s.isValidElement(r)){var o;let e,i,c=(o=r,(i=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(i=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),l=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==s.Fragment&&(l.ref=t?(0,n.t)(t,c):c),s.cloneElement(r,l)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=s.forwardRef((e,r)=>{let{children:n,...o}=e,i=s.Children.toArray(n),c=i.find(l);if(c){let e=c.props.children,n=i.map(t=>t!==c?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...o,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...o,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var i=o("Slot"),c=Symbol("radix.slottable");function l(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}},60125:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let s=r(95125).A.create({baseURL:"http://localhost:3001/api",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var t,r,s,n,a,o,i,c;if(!e.response)return Promise.reject(Error("Cannot connect to server. Please ensure the backend is running on http://localhost:3001"));if((null==(t=e.response)?void 0:t.status)!==404){let t=(null==(s=e.response)?void 0:s.status)===401?"\uD83D\uDD12":(null==(n=e.response)?void 0:n.status)===404?"\uD83D\uDD0D":"❌";console.warn("".concat(t," API ").concat(null==(a=e.response)?void 0:a.status,":"),null==(o=e.config)?void 0:o.url,(null==(c=e.response)||null==(i=c.data)?void 0:i.message)||e.message)}return(null==(r=e.response)?void 0:r.status)===401&&(console.log("\uD83D\uDD12 Unauthorized - redirecting to login"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login"),Promise.reject(e)});let n=s},83101:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var s=r(2821);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.$,o=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:i}=t,c=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],s=null==i?void 0:i[e];if(null===t)return null;let a=n(t)||n(s);return o[e][a]}),l=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return a(e,c,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...l}[t]):({...i,...l})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},83209:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>i,Zp:()=>a,aR:()=>o});var s=r(95155);r(12115);var n=r(25016);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...r})}},86980:(e,t,r)=>{Promise.resolve().then(r.bind(r,262))},89436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(60125);let n={register:async e=>(await s.A.post("/auth/register",e)).data,login:async e=>(await s.A.post("/auth/login",e)).data,getProfile:async()=>(await s.A.get("/auth/me")).data,refreshToken:async e=>(await s.A.post("/auth/refresh",{refreshToken:e})).data,changePassword:async(e,t,r)=>(await s.A.patch("/auth/change-password",{currentPassword:e,newPassword:t,confirmPassword:r})).data,getUserSettings:async()=>(await s.A.get("/auth/settings")).data,updateUserSettings:async e=>(await s.A.patch("/auth/settings",e)).data,forgotPassword:async e=>(await s.A.post("/auth/forgot-password",{email:e})).data,resetPassword:async e=>(await s.A.post("/auth/reset-password",e)).data,sendVerificationEmail:async()=>(await s.A.post("/auth/send-verification-email")).data,verifyEmail:async(e,t)=>(await s.A.post("/auth/verify-email",{otpId:e,code:t})).data}},94446:(e,t,r)=>{"use strict";r.d(t,{s:()=>o,t:()=>a});var s=r(12115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,s=e.map(e=>{let s=n(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():n(e[t],null)}}}}function o(...e){return s.useCallback(a(...e),e)}},97003:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(95155);r(12115);var n=r(32467),a=r(83101),o=r(25016);let i=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:a,asChild:c=!1,...l}=e,d=c?n.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:r,size:a,className:t})),...l})}}},e=>{e.O(0,[5125,4909,8441,1255,7358],()=>e(e.s=86980)),_N_E=e.O()}]);