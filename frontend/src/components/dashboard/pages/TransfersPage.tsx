import React, { useState } from 'react';\nimport { Send, Plus, Shield, AlertCircle, CheckCircle } from 'lucide-react';\nimport { useTransferStore } from '@/stores/transferStore';\nimport { useWalletStore } from '@/stores/walletStore';\n\nexport const TransfersPage: React.FC = () => {\n  const { beneficiaries, transfers, loading, error } = useTransferStore();\n  const { wallet } = useWalletStore();\n  const [showForm, setShowForm] = useState(false);\n  const [transferType, setTransferType] = useState<'local' | 'international'>('local');\n  const [formData, setFormData] = useState({\n    recipientAccountNumber: '',\n    recipientName: '',\n    bankCode: '',\n    amount: '',\n    description: '',\n  });\n  const [showOTP, setShowOTP] = useState(false);\n  const [otp, setOtp] = useState('');\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setShowOTP(true);\n  };\n\n  const handleOTPConfirm = () => {\n    // TODO: Submit transfer with OTP verification\n    setShowForm(false);\n    setFormData({\n      recipientAccountNumber: '',\n      recipientName: '',\n      bankCode: '',\n      amount: '',\n      description: '',\n    });\n    setOtp('');\n    setShowOTP(false);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Transfers</h1>\n          <p className=\"text-gray-500 dark:text-gray-400 mt-1\">Send money locally or internationally</p>\n        </div>\n        {!showForm && (\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition\"\n          >\n            <Send className=\"w-4 h-4\" />\n            New Transfer\n          </button>\n        )}\n      </div>\n\n      {/* Error Alert */}\n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-gap-3\">\n          <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-red-700 dark:text-red-400 text-sm font-medium\">Transfer Error</p>\n            <p className=\"text-red-600 dark:text-red-300 text-sm mt-1\">{error}</p>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Transfer Form */}\n        <div className=\"lg:col-span-2\">\n          {showForm ? (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">New Transfer</h3>\n                <button\n                  onClick={() => {\n                    setShowForm(false);\n                    setShowOTP(false);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n                >\n                  ✕\n                </button>\n              </div>\n\n              {/* Transfer Type Tabs */}\n              <div className=\"flex gap-4 mb-6 border-b border-gray-200 dark:border-gray-700\">\n                <button\n                  onClick={() => setTransferType('local')}\n                  className={`pb-3 px-2 font-medium text-sm ${\n                    transferType === 'local'\n                      ? 'text-blue-600 border-b-2 border-blue-600'\n                      : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'\n                  }`}\n                >\n                  Local Transfer\n                </button>\n                <button\n                  onClick={() => setTransferType('international')}\n                  className={`pb-3 px-2 font-medium text-sm ${\n                    transferType === 'international'\n                      ? 'text-blue-600 border-b-2 border-blue-600'\n                      : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'\n                  }`}\n                >\n                  International\n                </button>\n              </div>\n\n              {!showOTP ? (\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                  {/* Recipient Name */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Recipient Name\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"recipientName\"\n                      value={formData.recipientName}\n                      onChange={handleInputChange}\n                      placeholder=\"Enter recipient name\"\n                      className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\n                      required\n                    />\n                  </div>\n\n                  {/* Account Number */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Account Number\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"recipientAccountNumber\"\n                      value={formData.recipientAccountNumber}\n                      onChange={handleInputChange}\n                      placeholder=\"Enter account number\"\n                      className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\n                      required\n                    />\n                  </div>\n\n                  {/* Bank Code */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Bank Code\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"bankCode\"\n                      value={formData.bankCode}\n                      onChange={handleInputChange}\n                      placeholder=\"e.g., 044\"\n                      className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\n                      required\n                    />\n                  </div>\n\n                  {/* Amount */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Amount (NGN)\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"amount\"\n                      value={formData.amount}\n                      onChange={handleInputChange}\n                      placeholder=\"0.00\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\n                      required\n                    />\n                    {wallet && (\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        Available: ₦{wallet.balance?.toLocaleString('en-NG')}\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Description */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Description (Optional)\n                    </label>\n                    <textarea\n                      name=\"description\"\n                      value={formData.description}\n                      onChange={handleInputChange}\n                      placeholder=\"What is this transfer for?\"\n                      rows={3}\n                      className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none resize-none\"\n                    />\n                  </div>\n\n                  {/* Submit Button */}\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {loading ? 'Processing...' : 'Continue to Verification'}\n                  </button>\n                </form>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                    <div className=\"flex items-start gap-3\">\n                      <Shield className=\"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0\" />\n                      <div>\n                        <p className=\"font-medium text-blue-900 dark:text-blue-300\">Verify your identity</p>\n                        <p className=\"text-sm text-blue-700 dark:text-blue-400 mt-1\">\n                          We've sent a verification code to your registered email and phone number.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Enter Verification Code\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={otp}\n                      onChange={(e) => setOtp(e.target.value)}\n                      placeholder=\"000000\"\n                      maxLength=\"6\"\n                      className=\"w-full px-4 py-2 text-center text-2xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none tracking-widest\"\n                    />\n                  </div>\n\n                  <button\n                    onClick={handleOTPConfirm}\n                    className=\"w-full py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition\"\n                  >\n                    Confirm Transfer\n                  </button>\n                  <button\n                    onClick={() => setShowOTP(false)}\n                    className=\"w-full py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-lg transition\"\n                  >\n                    Back\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center\">\n              <Send className=\"w-12 h-12 text-blue-600 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400\">No active transfer</p>\n              <button\n                onClick={() => setShowForm(true)}\n                className=\"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition\"\n              >\n                Start a Transfer\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Beneficiaries Sidebar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"font-semibold text-gray-900 dark:text-white\">Beneficiaries</h3>\n            <button className=\"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400\">\n              <Plus className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          {beneficiaries && beneficiaries.length > 0 ? (\n            <div className=\"space-y-3\">\n              {beneficiaries.map((beneficiary) => (\n                <div\n                  key={beneficiary.id}\n                  className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer transition\"\n                >\n                  <p className=\"font-medium text-gray-900 dark:text-white text-sm\">{beneficiary.accountName}</p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{beneficiary.accountNumber}</p>\n                  <p className=\"text-xs text-gray-400 dark:text-gray-500\">{beneficiary.bankCode}</p>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">No beneficiaries yet</p>\n          )}\n        </div>\n      </div>\n\n      {/* Transfer History */}\n      {transfers && transfers.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n          <h3 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Recent Transfers</h3>\n          <div className=\"space-y-3\">\n            {transfers.slice(0, 5).map((transfer) => (\n              <div key={transfer.id} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                <div className=\"flex-1\">\n                  <p className=\"font-medium text-gray-900 dark:text-white text-sm\">{transfer.recipientName}</p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">{transfer.recipientAccountNumber}</p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"font-semibold text-gray-900 dark:text-white\">-₦{transfer.amount.toLocaleString('en-NG')}</p>\n                  <span\n                    className={`text-xs font-medium ${\n                      transfer.status === 'COMPLETED'\n                        ? 'text-green-600'\n                        : transfer.status === 'PENDING'\n                        ? 'text-yellow-600'\n                        : 'text-red-600'\n                    }`}\n                  >\n                    {transfer.status}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n"