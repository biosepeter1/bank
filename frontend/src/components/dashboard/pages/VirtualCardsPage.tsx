import React, { useState } from 'react';\nimport { CreditCard, Plus, Freeze, LockOpen, Trash2, Eye, EyeOff } from 'lucide-react';\nimport { useCardStore } from '@/stores/cardStore';\n\nexport const VirtualCardsPage: React.FC = () => {\n  const { cards = [], loading } = useCardStore();\n  const [showCardForm, setShowCardForm] = useState(false);\n  const [selectedCard, setSelectedCard] = useState<string | null>(null);\n  const [showCardNumber, setShowCardNumber] = useState<Record<string, boolean>>({});\n\n  const virtualCards = cards.filter((card) => card.type === 'VIRTUAL');\n  const physicalCards = cards.filter((card) => card.type === 'PHYSICAL');\n\n  const CardPreview: React.FC<{ card: any; onSelect: () => void }> = ({ card, onSelect }) => (\n    <div\n      onClick={onSelect}\n      className={`relative h-48 rounded-lg cursor-pointer transition transform hover:scale-105 ${\n        card.status === 'ACTIVE'\n          ? 'bg-gradient-to-r from-blue-500 to-blue-600'\n          : 'bg-gray-400'\n      } p-6 text-white shadow-lg`}\n    >\n      <div className=\"absolute top-4 right-4\">\n        <div className=\"text-xs font-semibold opacity-70\">VISA</div>\n      </div>\n\n      <div className=\"absolute bottom-4 left-4 right-4 space-y-4\">\n        <div>\n          <p className=\"text-xs opacity-70 mb-1\">Card Number</p>\n          <div className=\"flex items-center gap-2\">\n            <p className=\"text-lg font-mono font-bold tracking-widest\">\n              {showCardNumber[card.id] ? card.cardNumber : `•••• •••• •••• ${card.cardNumber.slice(-4)}`}\n            </p>\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                setShowCardNumber((prev) => ({\n                  ...prev,\n                  [card.id]: !prev[card.id],\n                }));\n              }}\n              className=\"p-1 hover:bg-white/20 rounded\"\n            >\n              {showCardNumber[card.id] ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"flex justify-between items-end\">\n          <div>\n            <p className=\"text-xs opacity-70\">Card Holder</p>\n            <p className=\"font-semibold text-sm\">{card.holderName}</p>\n          </div>\n          <div>\n            <p className=\"text-xs opacity-70\">Expires</p>\n            <p className=\"font-semibold text-sm\">{card.expiryDate}</p>\n          </div>\n        </div>\n      </div>\n\n      {card.status === 'FROZEN' && (\n        <div className=\"absolute inset-0 bg-black/40 rounded-lg flex items-center justify-center\">\n          <Freeze className=\"w-8 h-8 text-white\" />\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">My Cards</h1>\n          <p className=\"text-gray-500 dark:text-gray-400 mt-1\">Manage your virtual and physical cards</p>\n        </div>\n        <button\n          onClick={() => setShowCardForm(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Request Card\n        </button>\n      </div>\n\n      {/* Virtual Cards */}\n      <div>\n        <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Virtual Cards ({virtualCards.length})</h2>\n        {virtualCards.length > 0 ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {virtualCards.map((card) => (\n              <CardPreview\n                key={card.id}\n                card={card}\n                onSelect={() => setSelectedCard(card.id)}\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n            <CreditCard className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">No virtual cards yet</p>\n            <button\n              onClick={() => setShowCardForm(true)}\n              className=\"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition\"\n            >\n              Request Virtual Card\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Physical Cards */}\n      <div>\n        <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Physical Cards ({physicalCards.length})</h2>\n        {physicalCards.length > 0 ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {physicalCards.map((card) => (\n              <CardPreview\n                key={card.id}\n                card={card}\n                onSelect={() => setSelectedCard(card.id)}\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n            <CreditCard className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">No physical cards yet</p>\n            <button\n              onClick={() => setShowCardForm(true)}\n              className=\"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition\"\n            >\n              Request Physical Card\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Selected Card Actions */}\n      {selectedCard && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n          <h3 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Card Options</h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <button className=\"flex flex-col items-center gap-2 p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition\">\n              <Freeze className=\"w-6 h-6 text-blue-600\" />\n              <span className=\"text-sm font-medium text-blue-600\">Freeze Card</span>\n            </button>\n            <button className=\"flex flex-col items-center gap-2 p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-lg transition\">\n              <LockOpen className=\"w-6 h-6 text-green-600\" />\n              <span className=\"text-sm font-medium text-green-600\">Unfreeze</span>\n            </button>\n            <button className=\"flex flex-col items-center gap-2 p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/40 rounded-lg transition\">\n              <CreditCard className=\"w-6 h-6 text-purple-600\" />\n              <span className=\"text-sm font-medium text-purple-600\">Limits</span>\n            </button>\n            <button className=\"flex flex-col items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg transition\">\n              <Trash2 className=\"w-6 h-6 text-red-600\" />\n              <span className=\"text-sm font-medium text-red-600\">Delete</span>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Card Request Form Modal */}\n      {showCardForm && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Request New Card</h3>\n              <button\n                onClick={() => setShowCardForm(false)}\n                className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Card Type\n                </label>\n                <select className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\">\n                  <option>Virtual Card (Instant)</option>\n                  <option>Physical Card (7-10 days)</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Card Provider\n                </label>\n                <select className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\">\n                  <option>Visa</option>\n                  <option>Mastercard</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Monthly Limit (NGN)\n                </label>\n                <input\n                  type=\"number\"\n                  placeholder=\"500,000\"\n                  className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\n                />\n              </div>\n\n              <button className=\"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition\">\n                Request Card\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n"